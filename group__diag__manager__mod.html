<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FMS: diag_manager_mod</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FMS
   </div>
   <div id="projectbrief">Flexible Modeling System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__diag__manager__mod.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">diag_manager_mod</div>  </div>
</div><!--header-->
<div class="contents">

<p>diag_manager_mod is a set of simple calls for parallel diagnostics on distributed systems. It is geared toward the writing of data in netCDF format.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:ga391e6c5a8bd236359bd030890cedbef9"><td class="memItemLeft" align="right" valign="top">integer function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__manager__mod.html#ga391e6c5a8bd236359bd030890cedbef9">register_static_field</a> (module_name, field_name, axes, long_name, units, missing_value, range, mask_variant, standard_name, DYNAMIC, do_not_log, interp_method, tile_count, area, volume, realm)</td></tr>
<tr class="memdesc:ga391e6c5a8bd236359bd030890cedbef9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return field index for subsequent call to send_data.  <a href="group__diag__manager__mod.html#ga391e6c5a8bd236359bd030890cedbef9">More...</a><br /></td></tr>
<tr class="separator:ga391e6c5a8bd236359bd030890cedbef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb0ced689e563c1d91b3e85bddef1ef3"><td class="memItemLeft" align="right" valign="top">integer function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__manager__mod.html#gabb0ced689e563c1d91b3e85bddef1ef3">get_diag_field_id</a> (module_name, field_name)</td></tr>
<tr class="memdesc:gabb0ced689e563c1d91b3e85bddef1ef3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the diagnostic field ID of a given variable.  <a href="group__diag__manager__mod.html#gabb0ced689e563c1d91b3e85bddef1ef3">More...</a><br /></td></tr>
<tr class="separator:gabb0ced689e563c1d91b3e85bddef1ef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b5adb8ffece557999690f6f51f71c03"><td class="memItemLeft" align="right" valign="top"><a id="ga1b5adb8ffece557999690f6f51f71c03"></a>
subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><b>diag_manager_set_time_end</b> (Time_end_in)</td></tr>
<tr class="separator:ga1b5adb8ffece557999690f6f51f71c03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8465f5058eb48afcd76ad469ab3629a9"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__manager__mod.html#ga8465f5058eb48afcd76ad469ab3629a9">diag_send_complete_instant</a> (time)</td></tr>
<tr class="memdesc:ga8465f5058eb48afcd76ad469ab3629a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The subroutine 'diag_send_complete_instant' allows the user to save diagnostic data on variable intervals (user defined in code logic) to the same file. The argument (time_type) will be written to the time axis correspondingly.  <a href="group__diag__manager__mod.html#ga8465f5058eb48afcd76ad469ab3629a9">More...</a><br /></td></tr>
<tr class="separator:ga8465f5058eb48afcd76ad469ab3629a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaffcd2ffd364000d0a1b498c8aa21ea1e"><td class="memItemLeft" align="right" valign="top"><a id="gaffcd2ffd364000d0a1b498c8aa21ea1e"></a>
subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><b>diag_send_complete</b> (time_step, err_msg)</td></tr>
<tr class="separator:gaffcd2ffd364000d0a1b498c8aa21ea1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae363283d453e40d48d70f583c1e58b5f"><td class="memItemLeft" align="right" valign="top"><a id="gae363283d453e40d48d70f583c1e58b5f"></a>
subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__manager__mod.html#gae363283d453e40d48d70f583c1e58b5f">diag_manager_end</a> (time)</td></tr>
<tr class="memdesc:gae363283d453e40d48d70f583c1e58b5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flushes diagnostic buffers where necessary. Close diagnostics files. A warning will be issued here if a field in diag_table is not registered. <br /></td></tr>
<tr class="separator:gae363283d453e40d48d70f583c1e58b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab78722b306c31534a1b7870aaef28c6c"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__manager__mod.html#gab78722b306c31534a1b7870aaef28c6c">diag_manager_init</a> (diag_model_subset, time_init, err_msg)</td></tr>
<tr class="memdesc:gab78722b306c31534a1b7870aaef28c6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Diagnostics Manager.  <a href="group__diag__manager__mod.html#gab78722b306c31534a1b7870aaef28c6c">More...</a><br /></td></tr>
<tr class="separator:gab78722b306c31534a1b7870aaef28c6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f8f390263ec70bb5a7c281b95b37c5a"><td class="memItemLeft" align="right" valign="top">type(time_type) function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__manager__mod.html#ga6f8f390263ec70bb5a7c281b95b37c5a">get_base_time</a> ()</td></tr>
<tr class="memdesc:ga6f8f390263ec70bb5a7c281b95b37c5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return base time for diagnostics.  <a href="group__diag__manager__mod.html#ga6f8f390263ec70bb5a7c281b95b37c5a">More...</a><br /></td></tr>
<tr class="separator:ga6f8f390263ec70bb5a7c281b95b37c5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabcca324d176f7fc4a2afcb081e5467cd"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__manager__mod.html#gabcca324d176f7fc4a2afcb081e5467cd">get_base_date</a> (year, month, day, hour, minute, second)</td></tr>
<tr class="memdesc:gabcca324d176f7fc4a2afcb081e5467cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return base date for diagnostics.  <a href="group__diag__manager__mod.html#gabcca324d176f7fc4a2afcb081e5467cd">More...</a><br /></td></tr>
<tr class="separator:gabcca324d176f7fc4a2afcb081e5467cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05aea90030e4133f8f5669cf3279e41b"><td class="memItemLeft" align="right" valign="top">logical function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__manager__mod.html#ga05aea90030e4133f8f5669cf3279e41b">need_data</a> (diag_field_id, next_model_time)</td></tr>
<tr class="memdesc:ga05aea90030e4133f8f5669cf3279e41b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether data is needed for the current model time step.  <a href="group__diag__manager__mod.html#ga05aea90030e4133f8f5669cf3279e41b">More...</a><br /></td></tr>
<tr class="separator:ga05aea90030e4133f8f5669cf3279e41b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f632296fdf20dc41c1f4cc3918422b6"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__manager__mod.html#ga6f632296fdf20dc41c1f4cc3918422b6">diag_field_add_cell_measures</a> (diag_field_id, area, volume)</td></tr>
<tr class="memdesc:ga6f632296fdf20dc41c1f4cc3918422b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the cell_measures attribute to a diag out field.  <a href="group__diag__manager__mod.html#ga6f632296fdf20dc41c1f4cc3918422b6">More...</a><br /></td></tr>
<tr class="separator:ga6f632296fdf20dc41c1f4cc3918422b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>diag_manager_mod is a set of simple calls for parallel diagnostics on distributed systems. It is geared toward the writing of data in netCDF format. </p>
<dl class="section author"><dt>Author</dt><dd>Matt Harrison, Giang Nong, Seth Underwood</dd></dl>
<p><code>diag_manager_mod</code> provides a convenient set of interfaces for writing data to disk. It is built upon the parallel I/O interface of FMS code <code>/shared/mpp/mpp_io.F90</code>.</p>
<p>A single group of calls to the <code>diag_manager_mod</code> interfaces provides data to disk at any number of sampling and/or averaging intervals specified at run-time. Run-time specification of diagnostics are input through the diagnostics table.</p>
<h4>Usage</h4>
<p>Use of <code>diag_manager</code> includes the following steps: </p><ol>
<li>
Create diag_table as described in the &lt;LINK SRC="diag_table.html"&gt;<a class="el" href="diag__table_8F90.html" title="File for diag_table_mod.">diag_table.F90</a>&lt;/LINK&gt; documentation. </li>
<li>
Call &lt;LINK SRC="#diag_manager_init"&gt;<code>diag_manager_init</code>&lt;/LINK&gt; to initialize diag_manager_mod. </li>
<li>
Call &lt;LINK SRC="#register_diag_field"&gt;<code>register_diag_field</code>&lt;/LINK&gt; to register the field to be output. <b>NOTE:</b> ALL fields in diag_table should be registered <em>BEFORE</em> the first send_data call </li>
<li>
Call &lt;LINK SRC="#send_data"&gt;<code>send_data</code>&lt;/LINK&gt; to send data to output fields  </li>
<li>
Call &lt;LINK SRC="#diag_manager_end"&gt;<code>diag_manager_end</code>&lt;/LINK&gt; to exit diag_manager  </li>
</ol>
<h4>Features</h4>
<p>Features of <code>diag_manager_mod</code>: </p><ol>
<li>
Ability to output from 0D arrays (scalars) to 3D arrays. </li>
<li>
Ability to output time average of fields that have time dependent mask. </li>
<li>
Give optional warning if <code>register_diag_field</code> fails due to misspelled module name or field name. </li>
<li>
Check if a field is registered twice. </li>
<li>
Check for duplicate lines in diag_table.  </li>
<li>
&lt;LINK SRC="diag_table.html"&gt;diag_table&lt;/LINK&gt; can contain fields that are NOT written to any files. The file name in diag_table of these fields is <code>null</code>. </li>
<li>
By default, a field is output in its global grid. The user can now output a field in a specified region. See &lt;LINK SRC="#send_data"&gt;<code>send_data</code>&lt;/LINK&gt; for more details. </li>
<li>
To check if the diag table is set up correctly, user should set <code>debug_diag_manager=.true.</code> in diag_manager namelist, then the the content of diag_table is printed in stdout. </li>
<li>
<p class="startli">New optional format of file information in &lt;LINK SRC="diag_table.html"&gt;diag_table&lt;/LINK&gt;.It is possible to have just one file name and reuse it many times. A time string will be appended to the base file name each time a new file is opened. The time string can be any combination from year to second of current model time.</p>
<p class="interli">Here is an example file line: <br  />
 </p><pre>"file2_yr_dy%1yr%3dy",2,"hours",1,"hours","Time", 10, "days", "1 1 7 0 0 0", 6, "hours"</pre><p> <br  />
</p>
<p class="interli">From left to right we have: </p><ul>
<li>
file name </li>
<li>
output frequency </li>
<li>
output frequency unit </li>
<li>
Format (should always be 1) </li>
<li>
time axis unit </li>
<li>
time axis name </li>
<li>
frequency for creating new file </li>
<li>
unit for creating new file </li>
<li>
start time of the new file </li>
<li>
file duration </li>
<li>
file duration unit. </li>
</ul>
<p>The 'file duration', if absent, will be equal to frequency for creating a new file.</p>
<p class="interli">Thus, the above means: create a new file every 10 days, each file will last 6 hours from creation time, no files will be created before time "1 1 7 0 0 0".</p>
<p class="interli">In this example the string <code>10, "days", "1 1 7 0 0 0", 6, "hours"</code> is optional.</p>
<p class="endli">Keywords for the time string suffix is <code>xyr,xmo,xdy,xhr,xmi,xsc</code> where <code>x</code> is a mandatory 1 digit number specifying the width of field used in writing the string </p>
</li>
<li>
<p class="startli">New time axis for time averaged fields. Users can use a namelist option to handle the time value written to time axis for time averaged fields.</p>
<p class="interli">If <code>mix_snapshot_average_fields=.true.</code> then a time averaged file will have time values corresponding to ending time_bound e.g. January monthly average is labeled Feb01. Users can have both snapshot and averaged fields in one file.</p>
<p class="interli">If <code>mix_snapshot_average_fields=.false.</code> The time value written to time axis for time averaged fields is the middle on the averaging time. For example, January monthly mean will be written at Jan 16 not Feb 01 as before. However, to use this new feature users should <b>separate</b> snapshot fields and time averaged fields in <b>different</b> files or a fatal error will occur.</p>
<p class="endli">The namelist <b>default</b> value is <code>mix_snapshot_average_fields=.false.</code> </p>
</li>
<li>
<p class="startli">Time average, Root Mean Square, Max and Min, and diurnal. In addition to time average users can also get then Root Mean Square, Max or Min value during the same interval of time as time average. For this purpose, in the diag table users must replace <code>.true.</code> or <code>.false.</code> by "&lt;TT&gt;rms&lt;/TT&gt;, &lt;TT&gt;max&lt;/TT&gt;" or "&lt;TT&gt;min&lt;/TT&gt;". <b><em>Note:</em></b> Currently, max and min are not available for regional output.</p>
<p class="endli">A diurnal average or the average of an integer power can also be requested using <code>diurnal##</code> or <code>pow##</code> where <code>##</code> are the number of diurnal sections or integer power to average. </p>
</li>
<li>
<code>standard_name</code> is added as optional argument in &lt;LINK SRC="#register_diag_field"&gt;<code>register_diag_field</code> &lt;/LINK&gt;. </li>
<li>
When namelist variable <code>debug_diag_manager = .true.</code> array bounds are checked in &lt;LINK SRC="#send_data"&gt;<code>send_data</code>&lt;/LINK&gt;. </li>
<li>
Coordinate attributes can be written in the output file if the argument "&lt;TT&gt;aux&lt;/TT&gt;" is given in &lt;LINK SRC="diag_axis.html#diag_axis_init"&gt;<code>diag_axis_init</code>&lt;/LINK&gt;. The corresponding fields (geolat/geolon) should also be written to the same file. </li>
</ol>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="ga6f632296fdf20dc41c1f4cc3918422b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6f632296fdf20dc41c1f4cc3918422b6">&#9670;&nbsp;</a></span>diag_field_add_cell_measures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public diag_manager_mod::diag_field_add_cell_measures </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>diag_field_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>volume</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the cell_measures attribute to a diag out field. </p>
<p>Add the cell_measures attribute to a give diag field. This is useful if the area/volume fields for the diagnostic field are defined in another module after the diag_field. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">area</td><td>diag ids of area </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">volume</td><td>diag ids of volume </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="diag__manager_8F90_source.html#l04332">4332</a> of file <a class="el" href="diag__manager_8F90_source.html">diag_manager.F90</a>.</p>

</div>
</div>
<a id="gab78722b306c31534a1b7870aaef28c6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab78722b306c31534a1b7870aaef28c6c">&#9670;&nbsp;</a></span>diag_manager_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public diag_manager_mod::diag_manager_init </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>diag_model_subset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(6), intent(in), optional&#160;</td>
          <td class="paramname"><em>time_init</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(out), optional&#160;</td>
          <td class="paramname"><em>err_msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Diagnostics Manager. </p>
<p>Open and read diag_table. Select fields and files for diagnostic output. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">time_init</td><td>Model time diag_manager initialized </td></tr>
  </table>
  </dd>
</dl>
<p>Initialize fnum_for_domain with "dn" which stands for done</p>

<p class="definition">Definition at line <a class="el" href="diag__manager_8F90_source.html#l03808">3808</a> of file <a class="el" href="diag__manager_8F90_source.html">diag_manager.F90</a>.</p>

</div>
</div>
<a id="ga8465f5058eb48afcd76ad469ab3629a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8465f5058eb48afcd76ad469ab3629a9">&#9670;&nbsp;</a></span>diag_send_complete_instant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public diag_manager_mod::diag_send_complete_instant </td>
          <td>(</td>
          <td class="paramtype">type (time_type), intent(in)&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The subroutine 'diag_send_complete_instant' allows the user to save diagnostic data on variable intervals (user defined in code logic) to the same file. The argument (time_type) will be written to the time axis correspondingly. </p>
<p>The user is responsible for any averaging of accumulated data as this routine is not designed for instantaneous values. This routine works only for send_data calls within OpenMP regions as they are buffered until the complete signal is given. </p>

<p class="definition">Definition at line <a class="el" href="diag__manager_8F90_source.html#l03610">3610</a> of file <a class="el" href="diag__manager_8F90_source.html">diag_manager.F90</a>.</p>

</div>
</div>
<a id="gabcca324d176f7fc4a2afcb081e5467cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabcca324d176f7fc4a2afcb081e5467cd">&#9670;&nbsp;</a></span>get_base_date()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public diag_manager_mod::get_base_date </td>
          <td>(</td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>year</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>month</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>day</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>hour</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>minute</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>second</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return base date for diagnostics. </p>
<p>Return date information for diagnostic reference time. </p>

<p class="definition">Definition at line <a class="el" href="diag__manager_8F90_source.html#l04010">4010</a> of file <a class="el" href="diag__manager_8F90_source.html">diag_manager.F90</a>.</p>

</div>
</div>
<a id="ga6f8f390263ec70bb5a7c281b95b37c5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6f8f390263ec70bb5a7c281b95b37c5a">&#9670;&nbsp;</a></span>get_base_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">type(time_type) function, public diag_manager_mod::get_base_time</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return base time for diagnostics. </p>
<dl class="section return"><dt>Returns</dt><dd>time_type get_base_time</dd></dl>
<p>Return base time for diagnostics (note: base time must be &gt;= model time). </p>

<p class="definition">Definition at line <a class="el" href="diag__manager_8F90_source.html#l03999">3999</a> of file <a class="el" href="diag__manager_8F90_source.html">diag_manager.F90</a>.</p>

</div>
</div>
<a id="gabb0ced689e563c1d91b3e85bddef1ef3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabb0ced689e563c1d91b3e85bddef1ef3">&#9670;&nbsp;</a></span>get_diag_field_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer function, public diag_manager_mod::get_diag_field_id </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>module_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the diagnostic field ID of a given variable. </p>
<dl class="section return"><dt>Returns</dt><dd>get_diag_field_id will return the ID returned during the register_diag_field call. If the variable is not in the diag_table, then the value "DIAG_FIELD_NOT_FOUND" will be returned. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">module_name</td><td>Module name that registered the variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">field_name</td><td>Variable name </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="diag__manager_8F90_source.html#l01229">1229</a> of file <a class="el" href="diag__manager_8F90_source.html">diag_manager.F90</a>.</p>

</div>
</div>
<a id="ga05aea90030e4133f8f5669cf3279e41b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga05aea90030e4133f8f5669cf3279e41b">&#9670;&nbsp;</a></span>need_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">logical function, public diag_manager_mod::need_data </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>diag_field_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(time_type), intent(in)&#160;</td>
          <td class="paramname"><em>next_model_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine whether data is needed for the current model time step. </p>
<dl class="section return"><dt>Returns</dt><dd>Logical need_data</dd></dl>
<p>Determine whether data is needed for the current model time step. Since diagnostic data are buffered, the "next" model time is passed instead of the current model time. This call can be used to minimize overhead for complicated diagnostics. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">next_model_time</td><td>next_model_time = current model time + model time_step </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="diag__manager_8F90_source.html#l04030">4030</a> of file <a class="el" href="diag__manager_8F90_source.html">diag_manager.F90</a>.</p>

</div>
</div>
<a id="ga391e6c5a8bd236359bd030890cedbef9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga391e6c5a8bd236359bd030890cedbef9">&#9670;&nbsp;</a></span>register_static_field()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer function, public diag_manager_mod::register_static_field </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>module_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>axes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>long_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in), optional&#160;</td>
          <td class="paramname"><em>missing_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(2), intent(in), optional&#160;</td>
          <td class="paramname"><em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in), optional&#160;</td>
          <td class="paramname"><em>mask_variant</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>standard_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in), optional&#160;</td>
          <td class="paramname"><em>DYNAMIC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in), optional&#160;</td>
          <td class="paramname"><em>do_not_log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>interp_method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>tile_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>volume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>realm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return field index for subsequent call to send_data. </p>
<dl class="section return"><dt>Returns</dt><dd>Return (integer) field index for subsequent call to send_data. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">do_not_log</td><td>if TRUE, field information is not logged </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">interp_method</td><td>The interp method to be used when regridding the field in post-processing. Valid options are "conserve_order1", "conserve_order2", and "none". </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">area</td><td>Field ID for the area field associated with this field </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">volume</td><td>Field ID for the volume field associated with this field </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">realm</td><td>String to set as the value to the modeling_realm attribute </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="diag__manager_8F90_source.html#l00772">772</a> of file <a class="el" href="diag__manager_8F90_source.html">diag_manager.F90</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
